<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>SkyTicket - Trang Ch√≠nh</title>
    <link rel="stylesheet" th:href="@{/main.css}">
</head>
<body>

<header>
    <h2>‚úàÔ∏è SkyTicket - H·ªá Th·ªëng ƒê·∫∑t V√© M√°y Bay</h2>
</header>

<nav>
    <a th:href="@{/booking/create}">ƒê·∫∑t v√©</a>
    <a th:href="@{/booking/list}">Danh s√°ch v√©</a>
    <a th:href="@{/flights}">Tra c·ª©u chuy·∫øn bay</a>
    <a th:href="@{/logout}">ƒêƒÉng xu·∫•t</a>
</nav>

<main>
    <div class="search-section">
        <form th:action="@{/flight/search}" method="get" class="search-form">
            <div class="form-group">
                <label for="departure">ƒêi·ªÉm ƒëi:</label>
                <input type="text" id="departure" name="departure"
                       th:value="${departure}" placeholder="V√≠ d·ª•: SGN" required>
            </div>

            <div class="form-group">
                <label for="destination">ƒêi·ªÉm ƒë·∫øn:</label>
                <input type="text" id="destination" name="destination"
                       th:value="${destination}" placeholder="V√≠ d·ª•: HAN" required>
            </div>

            <div class="form-group">
                <label for="date">Ng√†y c·∫•t c√°nh:</label>
                <input type="date" id="date" name="date"
                       th:value="${#temporals.format(date, 'yyyy-MM-dd')}" required>
            </div>

            <div class="form-group">
                <label for="seatClass">H·∫°ng gh·∫ø:</label>
                <select id="seatClass" name="seatClass">
                    <option value="" th:selected="${seatClass == null or seatClass == ''}">T·∫•t c·∫£</option>
                    <option value="Economy" th:selected="${seatClass == 'Economy'}">Economy</option>
                    <option value="Business" th:selected="${seatClass == 'Business'}">Business</option>
                    <option value="First" th:selected="${seatClass == 'First'}">First Class</option>
                </select>
            </div>

            <button type="submit" class="btn btn-primary">üîç T√¨m chuy·∫øn bay</button>
        </form>
    </div>
    <!--  DANH S√ÅCH CHUY·∫æN BAY -->
    <div class="header">
        <div class="heading">
            <h1>Ô∏è Danh s√°ch L·ªãch bay</h1>
            <p>T√¨m v√† ƒë·∫∑t v√© m√°y bay c·ªßa b·∫°n</p>
        </div>
        <div class="actions">
            <button class="btn btn-ghost" type="button">B·ªô l·ªçc</button>
            <button class="btn btn-primary" type="button">üîÑ L√†m m·ªõi</button>
        </div>
    </div>
    <div class="table-card">
        <div class="table-wrapper">
            <table>
                <thead>
                <tr>
                    <th>M·∫´u m√°y bay</th>
                    <th>S√¢n bay ƒëi</th>
                    <th>ƒêi·ªÉm c·∫•t c√°nh</th>
                    <th>ƒêi·ªÉm h·∫° c√°nh</th>
                    <th>Ng√†y c·∫•t c√°nh</th>
                    <th>Gi·ªù c·∫•t c√°nh</th>
                    <th>Ng√†y h·∫° c√°nh</th>
                    <th>Gi·ªù h·∫° c√°nh</th>
                    <th>Lo·∫°i gh·∫ø</th>
                    <th>S·ªë gh·∫ø</th>
                    <th>Gi√° v√©</th>
                    <th>Tr·∫°ng th√°i</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="flight : ${flights}">
                    <td th:text="${flight.plane.planeModel}">Airbus A321</td>
                    <td th:text="${flight.plane.airport.airportName}">T√¢n S∆°n Nh·∫•t</td>
                    <td th:text="${flight.takeOff}">SGN</td>
                    <td th:text="${flight.land}">HAN</td>
                    <td th:text="${#temporals.format(flight.takeOffDate, 'dd-MM-yyyy')}">01-01-2025</td>
                    <td th:text="${#temporals.format(flight.takeOffHour, 'HH:mm')}">08:00</td>
                    <td th:text="${#temporals.format(flight.landDate, 'dd-MM-yyyy')}">01-01-2025</td>
                    <td th:text="${#temporals.format(flight.landHour, 'HH:mm')}">10:00</td>
                    <td th:text="${flight.flightSchedule.seatClass}">Economy</td>
                    <td class="num" th:text="${flight.flightSchedule.seatNumber}">1</td>
                    <td class="num"
                        th:text="${#numbers.formatDecimal(flight.flightSchedule.price, 0, 'COMMA', 0, 'POINT')} + ' VND'">
                        1,500,000 VND
                    </td>
                    <td>
                        <span th:switch="${flight.plane.status}">
                            <span th:case="'Scheduled'" class="status-badge status-scheduled"
                                  th:text="${flight.plane.status}">Scheduled</span>
                            <span th:case="'Ongoing'" class="status-badge status-ongoing"
                                  th:text="${flight.plane.status}">Ongoing</span>
                            <span th:case="'Completed'" class="status-badge status-completed"
                                  th:text="${flight.plane.status}">Completed</span>
                            <span th:case="*" class="status-badge status-cancelled" th:text="${flight.plane.status}">Cancelled</span>
                        </span>
                        <form th:action="@{/booking/create}">
                            <button>ƒê·∫∑t v√© ngay</button>
                        </form>
                    </td>
                </tr>

                <tr th:if="${flights == null or flights.isEmpty()}">
                    <td colspan="12">
                        <div class="empty-state">
                            <div class="empty-state-icon">üì≠</div>
                            <p>Kh√¥ng c√≥ l·ªãch bay n√†o.</p>
                            <small>Vui l√≤ng quay l·∫°i sau ho·∫∑c li√™n h·ªá h·ªó tr·ª£ kh√°ch h√†ng.</small>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
    <h1>Ch√†o m·ª´ng ƒë·∫øn v·ªõi SkyTicket!</h1>
    <p>H·ªá th·ªëng gi√∫p b·∫°n t√¨m ki·∫øm v√† ƒë·∫∑t v√© m√°y bay d·ªÖ d√†ng, nhanh ch√≥ng.</p>

    <a th:href="@{/booking/create}" class="btn">B·∫Øt ƒë·∫ßu ƒë·∫∑t v√© ngay</a>
</main>

<footer>
    <p>¬© 2025 SkyTicket. All rights reserved.</p>
</footer>

</body>
</html>
